# Snakemake CLI å¸¸ç”¨æŒ‡ä»¤æ•´ç†

**Update: 2025.07.28**

Snakemake æä¾›å¼·å¤§çš„å‘½ä»¤åˆ—ä»‹é¢ (CLI)ï¼Œç”¨ä¾†æ§åˆ¶å·¥ä½œæµç¨‹çš„åŸ·è¡Œã€é™¤éŒ¯èˆ‡å¯è¦–åŒ–ã€‚ä»¥ä¸‹æ•´ç†å¸¸è¦‹èˆ‡å¯¦ç”¨çš„ CLI æŒ‡ä»¤ã€‚

---

## ğŸ§­ åŸºæœ¬åŸ·è¡ŒæŒ‡ä»¤

| æŒ‡ä»¤                        | èªªæ˜                |
| ------------------------- | ----------------- |
| `snakemake`               | åŸ·è¡Œé è¨­çš„ Snakefile   |
| `-s Snakefile`            | æŒ‡å®š Snakefile è·¯å¾‘   |
| `--cores N` æˆ– `-j N`      | æŒ‡å®šæœ€å¤šä½¿ç”¨ N å€‹ CPU æ ¸å¿ƒ |
| `--dry-run` æˆ– `-n`        | è©¦è·‘ï¼Œä¸å¯¦éš›åŸ·è¡Œå‘½ä»¤        |
| `--printshellcmds` æˆ– `-p` | é¡¯ç¤ºå°‡åŸ·è¡Œçš„ shell æŒ‡ä»¤   |
| `--reason` æˆ– `-r`         | é¡¯ç¤ºç‚ºä½•è¦åŸ·è¡Œè©² rule     |
| `--directory DIR` æˆ– `-d`  | åˆ‡æ›åŸ·è¡Œç›®éŒ„            |
| `--snakefile Snakefile`   | æ˜ç¢ºæŒ‡å®š Snakefile è·¯å¾‘ |

---

## ğŸ—‚ï¸ è¨­å®šèˆ‡åƒæ•¸è¦†å¯«

| æŒ‡ä»¤                                 | èªªæ˜                      |
| ---------------------------------- | ----------------------- |
| `--config key=value ...`           | å‚³å…¥ config dictionary å…§å®¹ |
| `--configfile config.yaml`         | ä½¿ç”¨ YAML æ ¼å¼çš„è¨­å®šæª”          |
| `--set-threads rule=4`             | è¦†å¯«å–®ä¸€ rule çš„ threads æ•¸é‡  |
| `--set-resources rule:mem_mb=4000` | è¦†å¯« rule ä½¿ç”¨çš„è³‡æºåƒæ•¸         |
| `--default-resources mem_mb=2000`  | æœªå®šç¾©è³‡æºçš„é è¨­å€¼               |

---

## ğŸ—ï¸ åŸ·è¡Œæ§åˆ¶èˆ‡éŒ¯èª¤å®¹å¿

| æŒ‡ä»¤                                  | èªªæ˜                         |
| ----------------------------------- | -------------------------- |
| `--rerun-incomplete`                | é‡æ–°åŸ·è¡Œä¸å®Œæ•´çš„ job               |
| `--keep-going`                      | å³ä½¿æœ‰ job å¤±æ•—ä¹Ÿç¹¼çºŒåŸ·è¡Œå…¶ä»– job      |
| `--force` æˆ– `--forceall`            | å¼·åˆ¶é‡æ–°åŸ·è¡ŒæŒ‡å®š/æ‰€æœ‰ rule           |
| `--forcerun rule1 rule2`            | åªé‡æ–°åŸ·è¡Œç‰¹å®š rule               |
| `--unlock`                          | è§£é– workflow ç‹€æ…‹ (æ¸…é™¤ lock æª”) |
| `--latency-wait N`                  | ç­‰å¾…æª”æ¡ˆç³»çµ±ç©©å®šæ™‚é–“ (ç§’)             |
| `--touch`                           | è§¸ç¢°è¼¸å‡ºæª”æ¡ˆï¼Œä¸åŸ·è¡Œå¯¦éš›å‘½ä»¤             |
| `--rerun-triggers code input mtime` | è‡ªè¨‚è§¸ç™¼é‡æ–°åŸ·è¡Œçš„æ¢ä»¶                |

---

## ğŸ“¦ ç’°å¢ƒèˆ‡å®¹å™¨æ”¯æ´

| æŒ‡ä»¤                                      | èªªæ˜                    |
| --------------------------------------- | --------------------- |
| `--use-conda`                           | å•Ÿç”¨ conda è™›æ“¬ç’°å¢ƒ         |
| `--conda-prefix PATH`                   | æŒ‡å®š conda ç’°å¢ƒå­˜æ”¾è·¯å¾‘       |
| `--conda-frontend conda/mamba`          | ä½¿ç”¨ conda æˆ– mamba å®‰è£ç’°å¢ƒ |
| `--use-apptainer` / `--use-singularity` | å•Ÿç”¨å®¹å™¨åŸ·è¡Œç’°å¢ƒ              |
| `--apptainer-prefix`                    | å®¹å™¨å¿«å–ç›®éŒ„                |
| `--apptainer-args`                      | å‚³éçµ¦å®¹å™¨çš„é™„åŠ åƒæ•¸            |

---

## ğŸ“Š è¦–è¦ºåŒ–èˆ‡å ±å‘Š

| æŒ‡ä»¤                     | èªªæ˜                           |
| ---------------------- | ---------------------------- |
| `--dag`                | è¼¸å‡º job DAGï¼ˆdot/mermaid æ ¼å¼ï¼‰   |
| `--rulegraph`          | è¼¸å‡º rule DAGï¼ˆä¸å«æª”æ¡ˆè³‡è¨Šï¼‰          |
| `--filegraph`          | è¼¸å‡º rule èˆ‡ input/output çš„ DAG |
| `--summary`            | é¡¯ç¤ºæ¯å€‹ç”¢å‡ºæª”æ¡ˆçš„ç‹€æ…‹æ‘˜è¦                |
| `--detailed-summary`   | é¡¯ç¤ºè¼¸å‡ºæª”æ¡ˆã€command ç­‰ç´°ç¯€           |
| `--report report.html` | ç”¢ç”Ÿå®Œæ•´å¯è®€çš„ HTML å ±å‘Š              |
| `--lint`               | æª¢æŸ¥ Snakefile å¯è®€æ€§èˆ‡å»ºè­°æ”¹é€²        |

---

## ğŸ” å¤§å‹å·¥ä½œæµç¨‹æ”¯æ´

| æŒ‡ä»¤                   | èªªæ˜                        |
| -------------------- | ------------------------- |
| `--batch rule=1/3`   | åƒ…åŸ·è¡Œ rule çš„ç¬¬ 1/3 æ‰¹æ¬¡è¼¸å…¥      |
| `--until target`     | åƒ…åŸ·è¡Œåˆ°æŒ‡å®š rule/æª”æ¡ˆç‚ºæ­¢          |
| `--omit-from target` | æ’é™¤æŒ‡å®š rule/æª”æ¡ˆåŠå…¶ downstream |

---

## ğŸ“ æ¸…ç†èˆ‡ç‹€æ…‹

| æŒ‡ä»¤                     | èªªæ˜                   |
| ---------------------- | -------------------- |
| `--cleanup-metadata`   | ç§»é™¤æª”æ¡ˆçš„ metadata èˆ‡ç‰ˆæœ¬è³‡è¨Š |
| `--cleanup-shadow`     | ç§»é™¤æ®˜ç•™çš„ shadow è³‡æ–™å¤¾     |
| `--delete-all-output`  | åˆªé™¤ workflow ç”¢å‡ºçš„æ‰€æœ‰æª”æ¡ˆ  |
| `--delete-temp-output` | åƒ…åˆªé™¤ temp() æŒ‡å®šçš„æš«å­˜æª”    |
| `--keep-incomplete`    | ä¸åˆªé™¤å¤±æ•— job çš„ä¸å®Œæ•´è¼¸å‡º     |
| `--list-untracked`     | é¡¯ç¤º workflow æœªä½¿ç”¨çš„æª”æ¡ˆ   |

---

## ğŸ§ª å–®å…ƒæ¸¬è©¦èˆ‡é™¤éŒ¯

| æŒ‡ä»¤                      | èªªæ˜                         |
| ----------------------- | -------------------------- |
| `--generate-unit-tests` | è‡ªå‹•ç”¢ç”Ÿæ¯å€‹ rule çš„æ¸¬è©¦æ¡ˆä¾‹          |
| `--debug-dag`           | é¡¯ç¤º DAG ä¸­æ¨è«–çš„ wildcard èˆ‡ job |
| `--verbose`             | é¡¯ç¤ºé™¤éŒ¯è³‡è¨Š                     |
| `--show-failed-logs`    | é¡¯ç¤ºå¤±æ•— job çš„ log             |

---

## ğŸ§µ Profiles æ”¯æ´

| æŒ‡ä»¤                    | èªªæ˜                       |
| --------------------- | ------------------------ |
| `--profile myprofile` | æŒ‡å®šå…¨åŸŸé…ç½®æª”ï¼Œæ”¯æ´ cluster/cloud |
| `--workflow-profile`  | æŒ‡å®šå·¥ä½œæµç¨‹å°ˆå±¬çš„è¨­å®šæª”             |

---

## ğŸ“š åƒè€ƒé€£çµ

* CLI æ–‡ä»¶ï¼š[Snakemake CLI Docs](https://snakemake.readthedocs.io/en/stable/executing/cli.html)
* Profiles ç¯„ä¾‹ï¼š[snakemake-profiles GitHub](https://github.com/snakemake-profiles/doc)
* æ‰€æœ‰ flags ä¸€è¦½ï¼šåŸ·è¡Œ `snakemake -h`

