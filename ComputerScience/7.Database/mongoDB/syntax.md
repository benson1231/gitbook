# MongoDB åŸºç¤èªæ³•æ•™å­¸ï¼ˆmongosh CLIï¼‰

ä»¥ä¸‹ç‚º MongoDB ä½¿ç”¨ `mongosh` æŒ‡ä»¤åˆ—ä»‹é¢çš„åŸºç¤èªæ³•ï¼ŒåŒ…å«è³‡æ–™åº«æ“ä½œã€æ–‡ä»¶æ“ä½œã€æŸ¥è©¢èˆ‡æ›´æ–°ç­‰å¸¸ç”¨èªå¥ã€‚

---

## ğŸ“ è³‡æ–™åº«æ“ä½œ

### åˆ‡æ›æˆ–å»ºç«‹è³‡æ–™åº«

```js
use mydb  // è‹¥ mydb ä¸å­˜åœ¨ï¼Œå°‡åœ¨æ’å…¥è³‡æ–™å¾Œå»ºç«‹
```

### æŸ¥çœ‹ç›®å‰æ‰€æœ‰è³‡æ–™åº«

```js
show dbs
```

---

## ğŸ“‚ é›†åˆï¼ˆCollectionï¼‰æ“ä½œ

### æŸ¥çœ‹ç›®å‰è³‡æ–™åº«ä¸­çš„é›†åˆ

```js
show collections
```

### æ’å…¥å–®ç­†æ–‡ä»¶

```js
db.users.insertOne({ name: "Alice", age: 30 })
```

### æ’å…¥å¤šç­†æ–‡ä»¶

```js
db.users.insertMany([
  { name: "Bob", age: 25 },
  { name: "Charlie", age: 35 }
])
```

---

## ğŸ” æŸ¥è©¢è³‡æ–™

### æŸ¥è©¢å…¨éƒ¨æ–‡ä»¶

```js
db.users.find()
```

### æŸ¥è©¢ç¬¬ä¸€ç­†ç¬¦åˆæ¢ä»¶çš„æ–‡ä»¶

```js
db.users.findOne({ name: "Alice" })
```

### è¨ˆç®—ç¬¦åˆæ¢ä»¶çš„æ–‡ä»¶æ•¸é‡

```js
db.users.countDocuments({ age: { $gte: 30 } })
```

### ä½¿ç”¨æ¢ä»¶æŸ¥è©¢

```js
db.users.find({ age: 30 })
```

### æ¢ä»¶é‹ç®—ç¬¦ï¼š

```js
// å¤§æ–¼ç­‰æ–¼ã€å°æ–¼
{ age: { $gte: 30, $lt: 40 } }

// $in / $nin
{ name: { $in: ["Alice", "Bob"] } }
{ name: { $nin: ["Eve"] } }

// æ¬„ä½æ˜¯å¦å­˜åœ¨
{ email: { $exists: true } }

// çµ„åˆæ¢ä»¶
{ $and: [ { age: { $gt: 20 } }, { name: "Alice" } ] }
{ $or:  [ { age: 25 }, { name: "Charlie" } ] }
{ age: { $not: { $gte: 30 } } }

// æ­£è¦è¡¨é”å¼
{ name: /a/i }  // æ¨¡ç³Šæ¯”å°åŒ…å« aï¼Œä¸åˆ†å¤§å°å¯«
```

### é™åˆ¶èˆ‡æ’åº

```js
// åªå–å‰ 2 ç­†
.find().limit(2)

// è·³éå‰ 2 ç­†
.find().skip(2)

// ä¾å¹´é½¡éå¢æ’åº
.find().sort({ age: 1 })

// çµ„åˆä½¿ç”¨
.find().sort({ age: -1 }).limit(3)
```

---

## âœï¸ æ›´æ–°èˆ‡åˆªé™¤è³‡æ–™

### æ›´æ–°å–®ç­†è³‡æ–™

```js
db.users.updateOne(
  { name: "Alice" },
  { $set: { age: 31 } }
)
```

### æ›´æ–°å¤šç­†è³‡æ–™

```js
db.users.updateMany(
  { age: { $lt: 30 } },
  { $inc: { age: 1 } }
)
```

### åˆªé™¤å–®ç­†è³‡æ–™

```js
db.users.deleteOne({ name: "Alice" })
```

### åˆªé™¤å¤šç­†è³‡æ–™

```js
db.users.deleteMany({ age: { $gte: 35 } })
```

---

é€™äº›èªæ³•æ¶µè“‹ MongoDB é–‹ç™¼ä¸­æœ€å¸¸ä½¿ç”¨çš„æ“ä½œï¼Œé©åˆåˆå­¸è€…ç·´ç¿’ CRUD èˆ‡è¤‡é›œæ¢ä»¶æŸ¥è©¢ã€‚é€²éšæ‡‰ç”¨å¦‚èšåˆ (`aggregate`)ã€ç´¢å¼•ã€é©—è­‰è¦å‰‡ç­‰å¯åœ¨å¾ŒçºŒå­¸ç¿’è£œå……ã€‚
