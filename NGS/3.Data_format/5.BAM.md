# BAM Format

BAM（Binary Alignment/Map）格式是 SAM（Sequence Alignment/Map）格式的二進位壓縮版本，廣泛應用於次世代定序（NGS）中儲存序列對齊（alignment）結果，具有體積小、讀寫效率高等優點。

---

## 一、BAM 與 SAM 的關係

| 格式  | 格式類型  | 可讀性      | 儲存效率 | 常見用途      |
| --- | ----- | -------- | ---- | --------- |
| SAM | 純文字格式 | 高        | 較低   | 檢視與除錯     |
| BAM | 二進位格式 | 低（需工具讀取） | 高    | 對齊結果儲存與分析 |

BAM 可使用 `samtools view -b` 指令將 SAM 檔轉換而來。

---

## 二、BAM 結構說明

BAM 檔案由兩大部分組成：

1. **Header（標頭）**：包含參考基因組資訊（如染色體名稱與長度）、對齊工具版本、命令參數等。
2. **Alignment 部分**：每筆對齊結果包含以下欄位：

   * QNAME：讀段名稱
   * FLAG：旗標，描述讀段的狀態（如是否配對、是否為正向鏈）
   * RNAME：參考基因組名稱（如 chr1）
   * POS：對齊起始位置
   * MAPQ：對齊品質分數
   * CIGAR：比對摘要表示法
   * RNEXT、PNEXT：配對讀段的位置
   * TLEN：模板長度（template length）
   * SEQ：讀段序列
   * QUAL：品質分數

---

## 三、常見應用工具

* **samtools**：BAM 檢視、索引、篩選、排序
* **bcftools**：變異呼叫與分析（需結合 BAM）
* **IGV（Integrative Genomics Viewer）**：可視化對齊結果

---

## 四、BAM 優勢與注意事項

### 優勢：

* 壓縮格式，節省儲存空間
* 支援快速隨機存取（需 `.bai` 索引）
* 與多數生物資訊分析工具相容

### 注意事項：

* 需透過工具開啟（如 samtools）
* 建議搭配索引檔（`.bai`）使用以利快速定位

---

BAM 是 NGS 資料分析中不可或缺的核心格式之一，其高效能與廣泛相容性使其成為儲存與操作比對結果的標準選擇。
